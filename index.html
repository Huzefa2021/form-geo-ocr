<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Municipal Corporation of Greater Mumbai – Marshal Upload</title>

  <!-- UI unchanged: same classes/sections/labels -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Tesseract (browser) -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

  <!-- Config: where GeoJSONs live -->
  <script>
    window.GEO = {
      wards:  "data/wards.geojson",
      beats:  "data/beats.geojson",
      police: "data/police_jurisdiction.geojson"
    };
    // Cropping: take bottom band (fraction of height)
    window.CROP_FRACTION = 0.36;  // 36% from bottom; adjust if needed
  </script>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="https://www.mcgm.gov.in/com.mcgm.newframework/images/logo_V1.png" alt="BMC" class="logo">
      <div class="titles">
        <h1>Municipal Corporation of Greater Mumbai</h1>
        <h2>Abandoned Vehicles – Identification &amp; Pre-Notice (Marshal Upload)</h2>
      </div>
    </div>
    <div class="actions">
      <select id="ocrMode" aria-label="OCR Mode">
        <option value="auto" selected>OCR: Auto</option>
        <option value="local">OCR: Local (Tesseract)</option>
      </select>
      <button id="btnReset" class="btn">Reset</button>
    </div>
  </header>

  <div class="saffron-line top"></div>

  <section class="rail">
    <div class="chip active" id="stepUpload">Upload</div>
    <div class="chip" id="stepOcr">OCR</div>
    <div class="chip" id="stepParse">Parse</div>
    <div class="chip" id="stepGeo">GeoJSON</div>
    <div class="chip" id="stepReview">Review</div>
  </section>

  <p id="timings" class="timings">Initializing…</p>

  <main class="grid">
    <section class="panel">
      <h3>Original Photo (25%)</h3>
      <div id="drop" class="drop">
        <input id="file" type="file" accept="image/*" />
        <p>Tap to choose image<br/><small>or drag &amp; drop (JPG/PNG from GPS Map Camera)</small></p>
      </div>
      <div id="originalWrap" class="imgWrap hidden">
        <img id="originalImg" alt="Original" />
      </div>
    </section>

    <section class="panel">
      <h3>Results</h3>
      <dl class="results">
        <dt>Date</dt><dd id="outDate">—</dd>
        <dt>Time</dt><dd id="outTime">—</dd>
        <dt>Latitude</dt><dd id="outLat">—</dd>
        <dt>Longitude</dt><dd id="outLon">—</dd>
        <dt>Address</dt><dd id="outAddr">—</dd>
        <dt>Ward</dt><dd id="outWard">—</dd>
        <dt>Beat No.</dt><dd id="outBeat">—</dd>
        <dt>Police Station</dt><dd id="outPS">—</dd>
      </dl>
    </section>

    <section class="panel">
      <h3>Cropped Overlay (GPS text)</h3>
      <canvas id="cropCanvas" class="cropCanvas"></canvas>
    </section>
  </main>

  <div id="alert" class="alert hidden"></div>

  <div class="saffron-line bottom"></div>

  <footer class="footer">
    <p>
      <strong>Developed by Crescendo Innovative Solutions LLP</strong> ·
      Admin: <a href="mailto:Care@crescendoits.com" class="saffron">Care@crescendoits.com</a> ·
      © 2025 Municipal Corporation of Greater Mumbai (MCGM) —
      <a href="https://www.mcgm.gov.in" target="_blank">www.mcgm.gov.in</a>
      <span class="build">Build: v2025.08.17.Prod.v11</span>
    </p>
  </footer>

  <script src="app.js"></script>
</body>
</html>
