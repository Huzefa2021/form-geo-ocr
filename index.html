<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>MCGM | Abandoned Vehicles Portal</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
/* ===== MCGM Theme ===== */
:root{
  --mcgm-blue:#004080; 
  --mcgm-orange:#ff9933;
  --bg:#0a2540; --bg-2:#0e2f55;
  --card:#102a4a;
  --accent:#f0b429; --accent-2:#ffd166;
  --muted:#a7c0de; --fg:#e7f0fb;
  --line:#224b78;
  --ok:#16a34a; --warn:#f59e0b; --err:#ef4444;
  --chip:#0d3566;
}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Segoe UI,Roboto,Arial,sans-serif; background:linear-gradient(180deg,var(--bg),var(--bg-2)); color:var(--fg);}
a{color:var(--accent)}
.wrap{max-width:1000px; margin:32px auto; padding:0 16px}

/* ===== Header Banner ===== */
header{background:var(--mcgm-blue); color:#fff; padding:14px 20px; display:flex; align-items:center; gap:16px; border-bottom:4px solid var(--mcgm-orange);}
header img{height:60px}
header .title{font-size:22px; font-weight:800}
header .sub{font-size:14px; opacity:.9}

/* ===== Footer ===== */
footer{background:var(--mcgm-blue); color:#fff; padding:14px 20px; margin-top:30px; border-top:4px solid var(--mcgm-orange); font-size:13px; text-align:center; line-height:1.6}
footer a{color:var(--mcgm-orange); font-weight:600}

/* ===== Cards / UI ===== */
.card{background:rgba(16,42,74,.85); border:1px solid var(--line); border-radius:14px; padding:18px; margin-top:14px}
.title{font-size:18px; font-weight:700; margin-bottom:8px}
.milestones{display:flex; gap:12px; flex-wrap:wrap; margin-bottom:8px}
.chip{display:flex; align-items:center; gap:8px; padding:6px 12px; border-radius:999px; background:var(--chip); border:1px solid var(--line); font-size:13px}
.chip .dot{width:8px; height:8px; border-radius:50%; background:#789fce}
.chip.active .dot{background:var(--accent)}
.chip.done .dot{background:var(--ok)}
.bar{position:relative; height:10px; border-radius:999px; background:#0b315c; border:1px solid var(--line); overflow:hidden}
.bar-fill{position:absolute; inset:0; width:0%; background:linear-gradient(90deg,var(--accent),var(--accent-2)); transition:width .4s ease}
.dropzone{border:2px dashed var(--line); border-radius:14px; min-height:180px; display:grid; place-items:center; text-align:center; cursor:pointer; transition:.2s; padding:18px; background:#0b315c26}
.dropzone:hover{border-color:#3e6ea6}
.dz-title{font-weight:700}
.dz-hint{color:var(--muted); font-size:13px}
label{font-size:12px; color:#bed3ea; display:block; margin:6px 0}
input[type="text"]{width:100%; padding:8px 10px; border-radius:8px; border:1px solid var(--line); background:#0b2e57; color:var(--fg)}
.btns{display:flex; gap:12px; flex-wrap:wrap; margin-top:12px}
button{padding:10px 14px; border-radius:10px; border:1px solid var(--line); background:#0b2e57; color:var(--fg); cursor:pointer}
button.primary{background:var(--accent); color:#2b1a03; font-weight:700}
.status{margin-top:8px; font-size:13px}
.status.ok{color:var(--ok)} .status.warn{color:var(--warn)} .status.err{color:var(--err)}
.panel{display:grid; gap:6px}
.kv{display:grid; grid-template-columns:120px 1fr; gap:8px; align-items:center; font-size:13px; padding:3px 0; border-bottom:1px dashed #1b4676}
.kv:last-child{border:0}
.mono{font-family:ui-monospace,Menlo,Consolas,monospace; word-break:break-word}
.scanner-container{position:relative; display:inline-block; margin-top:12px}
.preview{max-width:260px; border-radius:10px; border:1px solid var(--line)}
.scanner{position:absolute; top:0; left:0; right:0; height:20%; border-radius:10px;
  background:linear-gradient(to bottom, rgba(240,180,41,.5), rgba(240,180,41,0));
  display:none; animation:scanMove 3s linear infinite;}
@keyframes scanMove{0%{top:0;}100%{top:100%;}}
</style>

<!-- Tesseract.js + Turf.js -->
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5.1.0/dist/tesseract.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@turf/turf@7.2.0/turf.min.js"></script>
</head>
<body>
<!-- ===== HEADER ===== -->
<header>
  <img src="https://upload.wikimedia.org/wikipedia/commons/5/52/Brihanmumbai_Municipal_Corporation_logo.png" alt="MCGM Logo" />
  <div>
    <div class="title">Municipal Corporation of Greater Mumbai</div>
    <div class="sub">Abandoned Vehicles â€“ Identification & Pre-Notice Portal</div>
  </div>
</header>

<div class="wrap">

  <!-- Progress -->
  <div class="card">
    <div class="milestones" id="chips">
      <div class="chip" data-step="1"><span class="dot"></span>Upload</div>
      <div class="chip" data-step="2"><span class="dot"></span>OCR</div>
      <div class="chip" data-step="3"><span class="dot"></span>Parse</div>
      <div class="chip" data-step="4"><span class="dot"></span>GeoJSON</div>
      <div class="chip" data-step="5"><span class="dot"></span>Review</div>
      <div class="chip" data-step="6"><span class="dot"></span>Redirect</div>
    </div>
    <div class="bar"><div class="bar-fill" id="barFill"></div></div>
  </div>

  <!-- Upload + Preview -->
  <div class="card">
    <div class="title">Upload Image</div>
    <div id="dropzone" class="dropzone"><div><div class="dz-title">Drag & Drop image</div><div class="dz-hint">or click to choose</div></div></div>
    <input id="fileInput" type="file" accept="image/*" style="display:none" />
    <div class="scanner-container"><img id="previewImg" class="preview" alt=""><div id="scannerOverlay" class="scanner"></div></div>
    <div class="btns"><button id="btnProcess">Run OCR & Geo</button><button id="btnContinue" class="primary">Continue to Form</button></div>
    <div id="status" class="status"></div>
  </div>

  <!-- Results -->
  <div class="card">
    <div class="title">Results</div>
    <div class="panel">
      <div class="kv"><div>Date</div><div><input id="fDate"></div></div>
      <div class="kv"><div>Time</div><div><input id="fTime"></div></div>
      <div class="kv"><div>Latitude</div><div><input id="fLat"></div></div>
      <div class="kv"><div>Longitude</div><div><input id="fLon"></div></div>
      <div class="kv"><div>Address</div><div><input id="fAddr"></div></div>
      <div class="kv"><div>Ward</div><div><input id="fWard"></div></div>
      <div class="kv"><div>Beat</div><div><input id="fBeat"></div></div>
      <div class="kv"><div>Police</div><div><input id="fPS"></div></div>
      <div class="kv"><div>Prefill URL</div><div class="mono" id="prefillEcho"></div></div>
    </div>
  </div>
</div>

<!-- ===== FOOTER ===== -->
<footer>
  &copy; 2025 Municipal Corporation of Greater Mumbai (MCGM) <br>
  Designed for internal use by Field Marshals & Supervisors. <br>
  For assistance contact: <a href="#">mcgm-Ptradingmumbai@gmail.com</a> | Helpline: 9987013652
</footer>

<script>
/* === SAME SCRIPT from earlier (OCR + GeoJSON + Prefill builder) === */
/* ... Keep the JavaScript block from my last version unchanged ... */
</script>
</body>
</html>
