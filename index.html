<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Municipal Corporation of Greater Mumbai â€” Marshal Upload</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
  <link rel="stylesheet" href="styles.css" />

  <!-- Tesseract (eng + hin available on jsDelivr) -->
  <script defer src="https://cdn.jsdelivr.net/npm/tesseract.js@5.1.0/dist/tesseract.min.js"></script>
  <script defer src="app.js"></script>
</head>
<body>
  <!-- Header -->
  <header class="topbar">
    <div class="head-inner">
      <div class="brand">
        <img class="bmc-logo" src="https://www.mcgm.gov.in/com.mcgm.newframework/images/logo_V1.png" alt="BMC" />
        <div class="title">
          <h1>Municipal Corporation of Greater Mumbai</h1>
          <p>Abandoned Vehicles â€“ Identification &amp; Pre-Notice (Marshal Upload)</p>
        </div>
      </div>

      <div class="controls">
        <div class="btn-pill" id="btnUpload">Upload</div>
        <div class="btn-pill" id="btnOCR">OCR</div>
        <div class="btn-pill" id="btnParse">Parse</div>
        <div class="btn-pill active" id="btnGeo">GeoJSON</div>
        <div class="btn-pill" id="btnReview">Review</div>
        <div class="btn-pill" id="btnRedirect">Redirect</div>

        <div class="spacer"></div>

        <label class="ocr-mode">
          <span>OCR: </span>
          <select id="ocrMode">
            <option value="auto" selected>Auto</option>
            <option value="eng">ENG</option>
            <option value="hin">HIN</option>
          </select>
        </label>

        <button class="reset" id="btnReset">Reset</button>

        <img class="cres-logo" src="data/Crescendo Logo.png" alt="Crescendo" />
      </div>
    </div>
    <div class="saffron-line"></div>
  </header>

  <!-- Sticky stage strip (glued under header) -->
<div class="stage-wrap">
  <div class="stage-bar">
    <div id="st-upload" class="stage-pill is-pending">
      <span class="icon">â¬†ï¸</span> Upload
    </div>
    <div id="st-ocr" class="stage-pill is-pending">
      <span class="icon">ğŸ”</span> OCR
    </div>
    <div id="st-parse" class="stage-pill is-pending">
      <span class="icon">ğŸ§©</span> Parse
    </div>
    <div id="st-geo" class="stage-pill is-pending">
      <span class="icon">ğŸ—ºï¸</span> GeoJSON
    </div>
    <div id="st-review" class="stage-pill is-pending">
      <span class="icon">âœ…</span> Review
    </div>
  </div>
  <div id="stage-times" class="stage-times">
    Upload â€” 0.0s â€¢ OCR â€” 0.0s â€¢ Parse â€” 0.0s â€¢ GeoJSON â€” 0.0s â€¢ Review â€” 0.0s
  </div>
</div>

  <!-- Status strip -->
  <section class="status-strip">
    <div id="stageTimes">Upload â€” 0.0s â€¢ OCR â€” 0.0s â€¢ Parse â€” 0.0s â€¢ GeoJSON â€” 0.0s â€¢ Review â€” 0.0s â€¢ Redirect â€” 0.0s</div>
    <div class="cdn-chip" id="cdnChip">CDN: v5 (jsDelivr)</div>
  </section>

  <main class="layout">
    <!-- Left column -->
    <section class="col">
      <!-- Drop zone / Original -->
      <div class="card">
        <div class="card-hd">Original Photo (25%)</div>
        <div class="card-bd">
          <div id="dropzone" class="dropzone" tabindex="0" aria-label="Tap to choose image">
            <input id="fileInput" type="file" accept="image/*" hidden />
            <div class="dz-help">
              <strong>Tap to choose image</strong>
              <div>or drag &amp; drop (JPG/PNG from GPS Map Camera)</div>
            </div>
            <img id="originalPreview" class="preview original" alt="" />
          </div>
        </div>
      </div>

      <!-- Cropped overlay -->
      <div class="card">
        <div class="card-hd">Cropped Overlay (GPS text)</div>
        <div class="card-bd">
          <canvas id="cropCanvas" class="crop-canvas"></canvas>
          <img id="cropPreview" class="preview crop" alt="" />
        </div>
      </div>
    </section>

    <!-- Right column -->
    <section class="col">
      <div class="card">
        <div class="card-hd">Results</div>
        <div class="card-bd results">
          <dl>
            <dt>Date</dt><dd id="outDate">â€”</dd>
            <dt>Time</dt><dd id="outTime">â€”</dd>
            <dt>Latitude</dt><dd id="outLat">â€”</dd>
            <dt>Longitude</dt><dd id="outLng">â€”</dd>
            <dt>Address</dt><dd id="outAddr" class="mono">â€”</dd>
            <dt>Ward</dt><dd id="outWard">â€”</dd>
            <dt>Beat No.</dt><dd id="outBeat">â€”</dd>
            <dt>Police Station</dt><dd id="outPS">â€”</dd>
          </dl>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="foot">
    <div class="saffron-line top"></div>
    <div class="foot-inner">
      <div class="foot-text">
        <strong>Developed by</strong> Crescendo Innovative Solutions LLP Â·
        <strong>Admin:</strong> Huzefa Fakhruddin â€”
        <a class="saffron" href="mailto:Care@crescendoits.com">Care@crescendoits.com</a>
        Â· Â© 2025 Municipal Corporation of Greater Mumbai (MCGM) â€”
        <a href="https://www.mcgm.gov.in" target="_blank" rel="noopener">www.mcgm.gov.in</a>
      </div>
      <div class="build" id="buildTag">Build: v2025.08.17.Prod.v12</div>
    </div>
  </footer>
</body>
</html>
