<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MCGM | Abandoned Vehicles – Marshal Upload</title>
  <link rel="icon" href="favicon.ico" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Header (sticky + saffron underline) -->
  <header class="hdr">
    <div class="brand">
      <img class="logo-bmc" src="https://www.mcgm.gov.in/com.mcgm.newframework/images/logo_V1.png" alt="MCGM">
      <div class="txt">
        <div class="t1">Municipal Corporation of Greater Mumbai</div>
        <div class="t2">Abandoned Vehicles – Identification &amp; Pre-Notice (Marshal Upload)</div>
      </div>
    </div>
    <div class="tools">
      <span class="pill">OCR: Auto</span>
      <button id="btnReset" class="btn ghost">Reset</button>
      <img class="logo-cres" src="data/Crescendo Logo.png" alt="Crescendo">
    </div>
  </header>

  <!-- Milestones + progress + elapsed -->
  <section class="rail">
    <ul id="steps" class="steps">
      <li>Upload</li><li>OCR</li><li>Parse</li><li>GeoJSON</li><li>Review</li><li>Redirect</li>
    </ul>
    <div class="bar"><span id="bar"></span></div>
    <div class="rail-under">
      <span id="status" class="status">Initializing…</span>
      <span id="times" class="times">Upload — 0.0s • OCR — 0.0s • Parse — 0.0s • GeoJSON — 0.0s • Review — 0.0s • Redirect — 0.0s</span>
    </div>
    <div id="cdn" class="cdn">CDN: checking…</div>
  </section>

  <!-- Breadcrumbs -->
  <nav class="crumbs">Home › Abandoned Vehicles › Marshal Upload</nav>

  <!-- Main content -->
  <main class="wrap">
    <section class="grid">
      <!-- Left column -->
      <div>
        <div class="card" id="cardDrop">
          <h3>Upload Photo</h3>
          <div id="drop" class="drop" tabindex="0">
            <div><strong>Tap to choose image</strong><div>or drag &amp; drop (JPG/PNG from GPS Map Camera)</div></div>
            <input id="file" type="file" accept="image/*" capture="environment" />
          </div>
        </div>

        <div class="card hidden" id="cardOrig">
          <h3>Original Photo (25%)</h3>
          <div class="img center original25"><img id="imgOrig" alt=""></div>
        </div>

        <div class="card hidden" id="cardOverlay">
          <h3>Cropped Overlay (GPS text)</h3>
          <div class="img center overlay">
            <img id="imgOverlay" alt="">
            <div id="scanner" class="scanner"></div>
          </div>
        </div>
      </div>

      <!-- Right column -->
      <div>
        <div class="card">
          <h3>Results</h3>
          <div id="res"></div>
          <div id="resNote" class="note">Results will be populated post processing.</div>
        </div>
      </div>
    </section>

    <div id="redirect" class="redir hidden"></div>
  </main>

  <!-- Footer (centered + saffron accents) -->
  <footer class="ftr">
    <div>Developed by <strong>Crescendo Innovative Solutions LLP</strong> · Admin: <strong>Huzefa Fakhruddin</strong> — <a href="mailto:Care@crescendoits.com">Care@crescendoits.com</a></div>
    <div>© 2025 Municipal Corporation of Greater Mumbai (MCGM) — <a href="https://www.mcgm.gov.in" target="_blank" rel="noopener">www.mcgm.gov.in</a> <span class="build">| Build: <span id="ver">—</span></span></div>
  </footer>

  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6.5.0/turf.min.js"></script>
  <!-- keep this line to allow OpenCV preprocessing if available -->
  <script async src="https://docs.opencv.org/4.x/opencv.js" onload="window.__cvLoaded=true" onerror="window.__cvLoaded=false"></script>
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

  <!-- App -->
  <script src="app.js"></script>
</body>
</html>
