:root{
  --blue:#0f5281;
  --gold:#d4a017;
  --surface:#f6f8fc;
  --card:#ffffff;
  --text:#1d2433;
  --muted:#7a879a;
  --line:#e6e9f1;

  --ok:#27ae60;
  --warn:#f39c12;
  --err:#e74c3c;

  --e1:0 4px 10px rgba(10,14,29,.08);
  --e2:0 10px 24px rgba(10,14,29,.10);
  --e3:0 18px 48px rgba(10,14,29,.14);

  --footer-h: 72px;
  --hdr-h: 88px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background:var(--surface);
}

/* Header */
.app-header{
  position:sticky;top:0;z-index:1000;
  display:flex;justify-content:space-between;align-items:center;gap:16px;
  padding:10px 14px;background:var(--blue);color:#fff;
  border-bottom:5px solid var(--gold);
  box-shadow:0 10px 24px rgba(0,0,0,.15);
  min-height:var(--hdr-h);
}
.hdr-left{display:flex;gap:14px;align-items:center;min-width:0}
.hdr-title .t1{font-weight:800;letter-spacing:.2px;font-size:clamp(1rem,2.3vw,1.35rem)}
.hdr-title .t2{opacity:.95;font-size:clamp(.80rem,1.9vw,1rem)}

.logo-left,.logo-right{
  background:#fff;border-radius:14px;padding:6px 10px;
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 0 14px rgba(255, 204, 0, 0.6);
}
.mcgm-logo,.crescendo-logo{height:72px;object-fit:contain;display:block}

.hdr-right{display:flex;align-items:flex-start;gap:16px}
.hdr-right-stack{display:flex;flex-direction:column;gap:8px;align-items:flex-end}

/* Badges & Buttons */
.badge{
  display:inline-block;padding:4px 8px;border-radius:10px;font-weight:800;
  font-size:clamp(10px,2.9vw,12px);
  border:1px solid rgba(255,255,255,.15);
  box-shadow:0 2px 8px rgba(0,0,0,.12);
}
.badge-info{background:linear-gradient(180deg,#eaf5ff,#dff0ff);color:#0b6aa2}
.badge-warn{background:linear-gradient(180deg,#fff4da,#ffe9b2);color:#6a4a00}
.badge-ok{background:linear-gradient(180deg,#ecfff4,#d7f6e3);color:#0b5a2e}
.badge-err{background:linear-gradient(180deg,#ffe9e9,#ffd6d6);color:#6a1515}
.glow{box-shadow:0 0 0 3px rgba(212,160,23,.15), 0 6px 16px rgba(0,0,0,.12)}

.btn{
  border:0;border-radius:10px;padding:6px 10px;font-weight:800;cursor:pointer;
  box-shadow:0 6px 14px rgba(0,0,0,.14); font-size:clamp(10px,2.9vw,12px)
}
.btn-xs{padding:5px 8px}
.btn-xxs{padding:4px 8px}
.btn-danger{background:linear-gradient(180deg,#ffb4b4,#ff8484);color:#4d0d0d;border:1px solid #ffc6c6}
.btn-primary{background:linear-gradient(180deg,#ffe38e,#e6ba2b);color:#3b2b00;border:1px solid rgba(212,160,23,.45)}

/* Pill bar (sticky under header) */
.pillbar{
  position:sticky;top:calc(var(--hdr-h) - 2px);z-index:950;
  display:flex;gap:8px;align-items:center;flex-wrap:wrap;
  padding:10px 12px;background:#fff;border-bottom:2px solid var(--gold);
  box-shadow:var(--e1);
}
.pill{
  background:#fff9e6;border:1px solid #f3d57a;color:#5b4200;
  padding:8px 12px;border-radius:999px;font-weight:800;
  box-shadow:0 0 0 3px rgba(212,160,23,.14);
  display:flex;gap:6px;align-items:center
}
.pill.ok{background:#ecfff4;border-color:#bfe8cf;color:#126c3b;box-shadow:0 0 0 3px rgba(39,174,96,.16)}
.pill.run{background:#fff5d6;border-color:#f1c96e;color:#7a5100}
.pill.err{background:#ffecec;border-color:#ffc6c6;color:#8f1b1b}
.pill.pulse{animation:pulse 1.2s ease-in-out infinite}
@keyframes pulse{
  0%{box-shadow:0 0 0 3px rgba(39,174,96,.16)}
  50%{box-shadow:0 0 0 7px rgba(39,174,96,.24)}
  100%{box-shadow:0 0 0 3px rgba(39,174,96,.16)}
}

/* Banner */
.banner{
  position:sticky;top:calc(var(--hdr-h) + 46px);z-index:900;margin:10px 12px;padding:12px 14px;border-radius:12px;
  font-weight:800;box-shadow:var(--e1);border:1px solid var(--line);background:#fffdf3;color:#5b4200
}
.banner.error{background:#fff1f1;color:#7b2121;border-color:#ffc9c9}
.banner.success{background:#f5fff6;color:#10663a;border-color:#bfe8cf}

/* Layout */
.container{
  max-width:1240px;margin:12px auto;padding:0 12px;
  padding-bottom:calc(var(--footer-h) + 18px);
}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.card{
  background:var(--card);border:1px solid var(--line);border-radius:16px;
  box-shadow:var(--e2);padding:14px
}
.card>h3{margin:2px 4px 10px;font-size:1.05rem}

/* Drop area */
.droparea{
  border:2px dashed #cfd7e6;border-radius:14px;background:#fafbfe;min-height:220px;
  display:flex;align-items:center;justify-content:center;text-align:center;color:var(--muted);
  transition:all .15s ease; box-shadow:var(--e1);
}
.droparea:focus{outline:none;border-color:#8fb8ff;box-shadow:0 0 0 3px rgba(70,130,255,.2)}
.droparea.dragover{border-color:#7aa8ff;background:#f3f7ff}
.drop-invite .cam-emoji{font-size:28px;margin-bottom:8px}
.drop-invite .txt-1{font-weight:800;color:#3b485b}
.drop-invite .txt-2{font-size:.9rem}
.hidden-input{display:none}

/* Previews */
.preview-grid{display:flex;flex-wrap:wrap;gap:12px;margin-top:10px}
.preview-col{
  flex:1 1 48%;
  background:#fff;border:1px solid var(--line);border-radius:14px;padding:10px;
  box-shadow:var(--e1);min-height:300px;display:flex;flex-direction:column;
}
.preview-col figcaption{color:var(--muted);font-size:.92rem;margin-bottom:6px}
.preview-img{
  flex:1;width:100%;max-height:280px;object-fit:contain;border-radius:10px;border:1px solid var(--line);box-shadow:var(--e1)
}

/* Results & Console */
.results dl{display:grid;grid-template-columns:150px 1fr;row-gap:8px;column-gap:10px}
.results dt{color:#51617a;font-weight:800}
.results dd{margin:0}

.card-inset{margin-top:12px;border-radius:14px;overflow:hidden;border:1px solid var(--line);box-shadow:var(--e1)}
.console-head{
  display:flex;justify-content:space-between;align-items:center;background:#fff;color:#2b3a4e;
  padding:10px 12px;border-bottom:1px solid var(--line)
}
.console-actions{display:flex;gap:6px}
#console-pre{
  background:#0b1220;color:#d6e1ff;padding:12px 14px;white-space:pre-wrap;word-break:break-word;
  font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:.84rem;min-height:140px
}

/* Footer */
.app-footer{
  position:fixed;bottom:0;left:0;width:100%;z-index:1000;
  border-top:5px solid var(--gold);background:var(--blue);color:#fff;
  padding:10px 14px;display:flex;justify-content:center;align-items:center;
  box-shadow:var(--e3);height:var(--footer-h);text-align:center
}
.app-footer .ftext{
  font-size:clamp(.7rem,1.6vw,.9rem);
  line-height:1.5;
}
.app-footer strong{color:#ffd28c}

/* Responsive */
@media (max-width:980px){
  .grid{grid-template-columns:1fr}
  .mcgm-logo,.crescendo-logo{height:72px}
  .hdr-right-stack{align-items:flex-end}
}
@media (max-width:560px){
  .preview-col{min-height:260px}
  .preview-img{max-height:240px}
}
@media (max-width:420px){
  .mcgm-logo,.crescendo-logo{height:60px}
}
/* ===== Manual Crop Editor ===== */
.mc.hidden { display:none; }
.mc { border:1px solid var(--line); border-radius:12px; padding:10px; background:#0b0b0c; color:#fff; box-shadow:var(--e1); margin-top:10px; }
.mc-head { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.mc-actions button { margin-left:8px; }
.mc-actions .primary { background:#4f46e5; color:#fff; border:none; padding:6px 12px; border-radius:8px; }
.mc-actions .primary:hover { filter:brightness(1.05); }
.mc-stage { position:relative; max-height:60vh; overflow:auto; background:#111; border-radius:8px; }
#mcImg { display:block; max-width:100%; height:auto; user-select:none; -webkit-user-drag:none; }
.mc-box { position:absolute; border:2px dashed #22d3ee; outline:9999px solid rgba(2,6,23,0.6); box-shadow:0 0 0 1px rgba(34,211,238,0.4) inset; cursor:move; }
.mc-h { position:absolute; width:12px; height:12px; background:#22d3ee; border:2px solid #0b0b0c; border-radius:50%; }
.mc-h-nw{ left:-7px; top:-7px; cursor:nwse-resize; }
.mc-h-n{ left:calc(50% - 6px); top:-7px; cursor:ns-resize; }
.mc-h-ne{ right:-7px; top:-7px; cursor:nesw-resize; }
.mc-h-e{ right:-7px; top:calc(50% - 6px); cursor:ew-resize; }
.mc-h-se{ right:-7px; bottom:-7px; cursor:nwse-resize; }
.mc-h-s{ left:calc(50% - 6px); bottom:-7px; cursor:ns-resize; }
.mc-h-sw{ left:-7px; bottom:-7px; cursor:nesw-resize; }
.mc-h-w{ left:-7px; top:calc(50% - 6px); cursor:ew-resize; }
.mc-hint { color:#a3a3a3; font-size:12px; margin-top:8px; }

/* Button style used for the Adjust button */
.ghost { background:transparent; border:1px dashed #64748b; color:#334155; padding:6px 10px; border-radius:8px; }
.ghost:hover { border-color:#94a3b8; color:#1f2937; }
/* Modal dialog */
.mc-modal { padding:0; border:0; background:transparent; width:min(96vw, 1200px); }
.mc-modal::backdrop { background:rgba(2,6,23,.6); backdrop-filter:blur(2px); }
.mc { background:#0b0b0c; color:#fff; border-radius:12px; padding:10px; box-shadow:0 10px 30px rgba(0,0,0,.35); }
.mc-stage { position:relative; max-height:70vh; overflow:auto; background:#111; border-radius:8px; padding:12px; }

/* The wrapper is exactly the rendered image size */
.mc-canvas { position:relative; display:inline-block; }
#mcImg { display:block; width:100%; height:auto; max-width:none; user-select:none; -webkit-user-drag:none; }

/* Crop box + handles (unchanged) */
.mc-box { position:absolute; border:2px dashed #22d3ee; outline:9999px solid rgba(2,6,23,0.6); box-shadow:0 0 0 1px rgba(34,211,238,0.4) inset; cursor:move; }
.mc-h { position:absolute; width:12px; height:12px; background:#22d3ee; border:2px solid #0b0b0c; border-radius:50%; }
.mc-h-nw{ left:-7px; top:-7px; cursor:nwse-resize; } .mc-h-n{ left:calc(50% - 6px); top:-7px; cursor:ns-resize; }
.mc-h-ne{ right:-7px; top:-7px; cursor:nesw-resize; } .mc-h-e{ right:-7px; top:calc(50% - 6px); cursor:ew-resize; }
.mc-h-se{ right:-7px; bottom:-7px; cursor:nwse-resize; } .mc-h-s{ left:calc(50% - 6px); bottom:-7px; cursor:ns-resize; }
.mc-h-sw{ left:-7px; bottom:-7px; cursor:nesw-resize; } .mc-h-w{ left:-7px; top:calc(50% - 6px); cursor:ew-resize; }

/* Ghost button (keep if you don't already have it) */
.ghost { background:transparent; border:1px dashed #64748b; color:#cbd5e1; padding:6px 10px; border-radius:8px; }
.ghost:hover { border-color:#94a3b8; color:#e2e8f0; }
/* Console-style tool button (use for Copy, Hide, Adjust crop) */
.toolbtn{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:6px 10px;
  border:1px solid var(--line, #d1d5db);
  background:var(--panel, #ffffff);
  color:var(--text, #111827);
  border-radius:8px;
  font:inherit;
  font-weight:500;
  line-height:1;
  cursor:pointer;
  transition:background .15s, border-color .15s, color .15s;
}
.toolbtn:hover{
  background:var(--panelHover, #f9fafb);
  border-color:#cbd5e1;
}
.toolbtn:active{ transform:translateY(1px); }

